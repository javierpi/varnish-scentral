<?php
/**
 * @file
 * Code for the Cepal Session feature.
 */

include_once 'cepal_session.features.inc';

function cepal_session_form_alter(&$form, &$form_state, $form_id){
  if($form_id !== "session_node_form") return;

  $relations = cepal_session_node_form_relations();
  foreach ($relations as $dependent => $dependee){
    cepal_session_checkbox($form, $dependee, $dependent, FALSE);
  }

  $form['#validate'][] = 'cepal_session_node_form_validate';
}


function cepal_session_node_form_validate($form, &$form_state){

}


function cepal_session_node_form_relations(){
   return array(
    'field_country'                  => 'field_session_is_pause[und]',
    'field_session_area'             => 'field_session_is_pause[und]',
    'field_session_presentation'     => 'field_session_is_pause[und]',
    'field_session_speakers'         => 'field_session_is_pause[und]',
    'field_session_url_streaming'    => 'field_session_is_pause[und]',
    'field_session_url_video'        => 'field_session_is_pause[und]',
    'field_special_topic'            => 'field_session_is_pause[und]',
    'field_topic'                    => 'field_session_is_pause[und]',
    'field_unbis'                    => 'field_session_is_pause[und]',
    'field_session_related_content'  => 'field_session_is_pause[und]',
    'field_session_external_content' => 'field_session_is_pause[und]',

  );
}



function cepal_session_checkbox(&$form, $dependee, $dependent, $value = TRUE){
  $condition =  array(
    ':input[name="' . $dependee . '"]' => array('checked' => $value)
  );
  $form[$dependent]['#states'] = array(
    'visible'  => $condition,
    //'required' => $condition
  );
}